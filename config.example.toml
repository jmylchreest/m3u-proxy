# M3U Proxy Configuration Example
# Copy this file to config.toml and modify as needed

[database]
# Database connection URL
# Supported: sqlite://, postgres://, mysql://
url = "sqlite://./m3u-proxy.db"

# Maximum number of database connections
max_connections = 10

[web]
# Web server bind address
host = "0.0.0.0"

# Web server port
port = 8080

# Base URL for generating full URLs (logos, streams, etc.)
# This should be the public URL that clients will use to access the service
# Examples:
#   http://localhost:8080 (for local development)
#   https://m3u-proxy.example.com (for production with domain)
#   http://192.168.1.100:8080 (for local network access)
base_url = "http://localhost:8080"

[storage]
# Directory for M3U file storage
m3u_path = "./data/m3u"

# Directory for uploaded logos
uploaded_logo_path = "./data/logos/uploaded"

# Directory for cached logos
cached_logo_path = "./data/logos/cached"

# Number of proxy versions to keep (0 = only current)
proxy_versions_to_keep = 3

[ingestion]
# How often to update progress during channel processing (in number of channels)
# Lower values = more frequent updates but higher overhead
# Higher values = less frequent updates but better performance
progress_update_interval = 1000

# Whether to run missed scheduled refreshes immediately on startup
# If true, sources that missed their scheduled refresh will run immediately
# If false, sources will wait for their next scheduled time
run_missed_immediately = true

# Optional: Display configuration for EPG viewer and channel listings
[display]
# Local timezone for displaying times (default: UTC)
# Use IANA timezone names like "America/New_York", "Europe/London", etc.
local_timezone = "UTC"

# Optional: Data mapping engine optimization configuration
[data_mapping_engine]
# Special characters used for regex precheck filtering
# These characters are considered significant enough to use as first-pass filters
# Set to empty string "" to disable special character precheck
# Default: "+-@#$%&*=<>!~`€£{}[]"
precheck_special_chars = "+-@#$%&*=<>!~`€£{}[]"

# Minimum length required for literal strings in regex precheck
# Strings shorter than this will not be used for precheck filtering
# Set to 0 to disable literal string precheck entirely
# Default: 2
minimum_literal_length = 2
